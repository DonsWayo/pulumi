---
title: FAQ
description: Frequently asked questions
icon: HelpCircle
---

import { Accordions, Accordion } from 'fumadocs-ui/components/accordion';
import { Callout } from 'fumadocs-ui/components/callout';

## General Questions

<Accordions>
<Accordion id="how-much-cost" title="What are the AWS costs?">

These packages are open source and free to use. You only pay for the AWS resources you use:

- **Lambda**: ~$0.20 per 1M requests
- **CloudFront**: ~$0.085 per GB transferred
- **S3**: ~$0.023 per GB stored
- **CloudWatch**: ~$0.50 per GB logs

Most applications cost **less than $5/month** for moderate traffic.

</Accordion>

<Accordion id="frameworks-supported" title="Which frameworks are supported?">

Currently supported:
- **Next.js** (14+) - Full App Router and Pages Router support
- **SvelteKit** (2.0+) - Complete SSR/CSR capabilities
- **React Router** (v7) - Server-side rendering support

</Accordion>

<Accordion id="production-ready" title="Are these packages production-ready?">

Yes, these packages are designed for production workloads with:

- Auto-scaling Lambda functions
- Global CloudFront CDN
- Enterprise-grade AWS infrastructure
- Secure IAM roles and permissions
- CloudWatch monitoring and logs
- Support for high-traffic applications

</Accordion>
</Accordions>

## Deployment Questions

<Accordions>
<Accordion id="first-deployment" title="How do I deploy my first app?">

1. Clone the repository and navigate to the infrastructure package:
```bash
git clone https://github.com/donswayo/pulu-front.git
cd pulu-front/packages/infra
```

2. Configure AWS credentials:
```bash
aws configure
```

3. Deploy your app:
```bash
pulumi up -s <stack>
```

That's it! Pulumi will provision your AWS infrastructure automatically.

</Accordion>

<Accordion id="multiple-environments" title="How do I manage multiple environments?">

Use Pulumi stacks to manage different environments:

```bash
# Deploy to development
pulumi up -s development

# Deploy to staging
pulumi up -s staging

# Deploy to production
pulumi up -s production
```

Each stack maintains isolated AWS resources and configuration.

</Accordion>

<Accordion id="preview-deployments" title="How do preview deployments work?">

Use `pulumi preview` to see changes before deploying:

```bash
pulumi preview -s <stack>
```

For branch deployments, use dynamic stack names:

```bash
pulumi up -s feature-${BRANCH_NAME}
```

This creates isolated environments for each branch.

</Accordion>

<Accordion id="rollback" title="How do I rollback a deployment?">

You can rollback deployments using Pulumi:

1. **Redeploy previous commit**:
```bash
git checkout previous-commit
pulumi up -s production
```

2. **Use Pulumi history**:
```bash
pulumi stack history
pulumi stack select production
pulumi up --target urn:pulumi:production::my-app::...
```

3. **AWS Lambda versioning** (manual):
- Use Lambda aliases for blue-green deployments
- Configure CloudFront to point to specific versions

</Accordion>

<Accordion id="cicd-setup" title="How do I set up CI/CD?">

**GitHub Actions:**
```yaml
- name: Deploy
  run: |
    cd packages/infra
    pulumi up -s production --yes
  env:
    AWS_ACCESS_KEY_ID: ${{ secrets.AWS_KEY }}
    AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET }}
    PULUMI_ACCESS_TOKEN: ${{ secrets.PULUMI_ACCESS_TOKEN }}
```

**GitLab CI:**
```yaml
deploy:
  script:
    - cd packages/infra
    - pulumi up -s production --yes
```

For CI/CD integration examples, check the deployment documentation.

</Accordion>
</Accordions>

## Configuration Questions

<Accordions>
<Accordion id="env-variables" title="How do I set environment variables?">

Set environment variables in your Pulumi program:

1. **`packages/infra/index.ts`**:
```ts
const site = new Next("my-app", {
  environment: {
    API_URL: 'https://api.example.com',
    SECRET: process.env.SECRET
  }
});
```

2. **Pulumi config**:
```bash
pulumi config set API_URL https://api.example.com
pulumi config set --secret SECRET abc123
```

3. **Stack-specific config files**:
```yaml
# Pulumi.production.yaml
config:
  my-app:API_URL: https://api.example.com
```

</Accordion>

<Accordion id="custom-domain" title="How do I use a custom domain?">

1. Create ACM certificate in **us-east-1**:
```bash
aws acm request-certificate \
  --domain-name app.example.com \
  --validation-method DNS
```

2. Add to `packages/infra/index.ts`:
```ts
const site = new Next("my-app", {
  domain: {
    name: 'app.example.com',
    certificateArn: 'arn:aws:acm:us-east-1:...'
  }
});
```

3. Deploy:
```bash
pulumi up -s production
```

4. Update DNS to point to CloudFront distribution.

</Accordion>

<Accordion id="build-command" title="How do I customize the build command?">

Customize the build command in your application's build scripts:

```json
// package.json
{
  "scripts": {
    "build": "next build",
    "build:prod": "next build && custom-script"
  }
}
```

Run the custom build before deploying with Pulumi.

</Accordion>

<Accordion id="aws-region" title="How do I change the AWS region?">

Set the AWS region using Pulumi config:

1. **Pulumi config**:
```bash
pulumi config set aws:region eu-west-1
```

2. **Stack config file**:
```yaml
# Pulumi.production.yaml
config:
  aws:region: eu-west-1
```

3. **Environment variable**:
```bash
AWS_DEFAULT_REGION=eu-west-1 pulumi up
```

</Accordion>

<Accordion id="function-config" title="How do I configure Lambda settings?">

Customize Lambda settings in `packages/infra/index.ts`:

```ts
const site = new Next("my-app", {
  lambda: {
    // Memory in MB (128-10240)
    memory: 2048,

    // Timeout in seconds (1-900)
    timeout: 30,

    // CPU architecture
    architecture: 'arm64'
  }
});
```

Use Pulumi stack config for environment-specific settings.

</Accordion>
</Accordions>

## Troubleshooting Questions

<Accordions>
<Accordion id="aws-credentials-error" title="AWS credentials not found error">

**Solutions:**

1. **Configure AWS CLI**:
```bash
aws configure
```

2. **Set environment variables**:
```bash
export AWS_ACCESS_KEY_ID=your_key
export AWS_SECRET_ACCESS_KEY=your_secret
export AWS_DEFAULT_REGION=us-east-1
```

3. **Use AWS Vault**:
```bash
aws-vault exec personal -- pulumi up
```

4. **Check credentials**:
```bash
aws sts get-caller-identity
```

</Accordion>

<Accordion id="build-failed" title="Build failed error">

**Common causes:**

1. **Missing dependencies**:
```bash
npm install
```

2. **Wrong Node version**:
```bash
nvm use 20
```

3. **Build script error**:
```bash
# Test locally first
npm run build
```

4. **Memory issues**:
```ts
// packages/infra/index.ts
const site = new Next("my-app", {
  lambda: {
    memory: 4096 // Increase Lambda memory
  }
});
```

</Accordion>

<Accordion id="deployment-timeout" title="Deployment timeout">

**Solutions:**

1. **Increase timeout in Pulumi program**:
```ts
const site = new Next("my-app", {
  lambda: {
    timeout: 60 // seconds
  }
});
```

2. **Optimize function size**:
- Remove unnecessary dependencies
- Use tree-shaking
- Enable minification

3. **Check CloudWatch logs**:
```bash
aws logs tail /aws/lambda/my-app-function --follow
```

</Accordion>

<Accordion id="cold-starts" title="How do I reduce cold starts?">

**Strategies:**

1. **Use provisioned concurrency**:
```ts
const site = new Next("my-app", {
  lambda: {
    provisionedConcurrency: 5
  }
});
```

2. **Increase memory** (faster CPU):
```ts
const site = new Next("my-app", {
  lambda: {
    memory: 2048
  }
});
```

3. **Optimize bundle size**:
- Remove unused dependencies
- Use dynamic imports
- Minimize initial payload

</Accordion>

<Accordion id="monitoring" title="How do I monitor my application?">

**Built-in monitoring:**

1. **CloudWatch Logs**:
```bash
aws logs tail /aws/lambda/my-app-function --follow
```

2. **CloudWatch Metrics**:
- Lambda invocations
- Error rates
- Duration
- Throttles

3. **Custom monitoring**:
```ts
// Add custom metrics
console.log(JSON.stringify({
  metric: 'custom.metric',
  value: 123
}));
```

4. **Third-party** (Datadog, New Relic):
- Add as Lambda layers
- Configure in environment variables

</Accordion>
</Accordions>

## Advanced Questions

<Accordions>
<Accordion id="vpc-config" title="Can I use a VPC?">

Yes, configure VPC in `packages/infra/index.ts`:

```ts
const site = new Next("my-app", {
  lambda: {
    vpc: {
      securityGroupIds: ['sg-xxx'],
      subnetIds: ['subnet-xxx', 'subnet-yyy']
    }
  }
});
```

<Callout type="warning">
VPC configuration increases cold starts and requires NAT Gateway for internet access.
</Callout>

</Accordion>

<Accordion id="database-connection" title="How do I connect to a database?">

**Best practices:**

1. **Use connection pooling**:
```ts
import { Pool } from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  max: 1 // Lambda constraint
});
```

2. **RDS Proxy** (recommended):
- Handles connection pooling
- Reduces cold starts
- Better for serverless

3. **Serverless databases**:
- Aurora Serverless
- DynamoDB
- PlanetScale
- Neon

</Accordion>

<Accordion id="websockets" title="Are WebSockets supported?">

AWS Lambda doesn't support persistent connections. Alternatives:

1. **AWS API Gateway WebSockets**
2. **Pusher/Ably** (third-party)
3. **Server-Sent Events** (one-way)
4. **Long polling** (fallback)

For real-time needs, consider a hybrid approach with a separate WebSocket service.

</Accordion>

<Accordion id="file-uploads" title="How do I handle file uploads?">

**Recommended approach:**

1. **Direct S3 upload**:
```ts
// Generate presigned URL
const url = await s3.getSignedUrl('putObject', {
  Bucket: 'my-bucket',
  Key: 'file.jpg',
  Expires: 300
});

// Client uploads directly to S3
```

2. **Lambda has 6MB payload limit** for direct uploads

3. **Use multipart uploads** for large files

</Accordion>

<Accordion id="contribute" title="How can I contribute?">

Contributions are welcome!

1. **Report bugs**: [GitHub Issues](https://github.com/donswayo/pulu-front/issues)
2. **Submit PRs**: Fork and create pull requests
3. **Documentation**: Help improve docs
4. **Examples**: Share your use cases

See the [Contributing Guide](https://github.com/donswayo/pulu-front/blob/main/CONTRIBUTING.md) for details.

</Accordion>
</Accordions>

## Still Have Questions?

<Callout>
Can't find your answer? Ask on [GitHub Discussions](https://github.com/donswayo/pulu-front/discussions) or open an [issue](https://github.com/donswayo/pulu-front/issues).
</Callout>